var ee=Object.defineProperty,te=Object.defineProperties;var ne=Object.getOwnPropertyDescriptors;var O=Object.getOwnPropertySymbols;var B=Object.prototype.hasOwnProperty,q=Object.prototype.propertyIsEnumerable;var J=(o,e,n)=>e in o?ee(o,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):o[e]=n,S=(o,e)=>{for(var n in e||(e={}))B.call(e,n)&&J(o,n,e[n]);if(O)for(var n of O(e))q.call(e,n)&&J(o,n,e[n]);return o},K=(o,e)=>te(o,ne(e));var R=(o,e)=>{var n={};for(var t in o)B.call(o,t)&&e.indexOf(t)<0&&(n[t]=o[t]);if(o!=null&&O)for(var t of O(o))e.indexOf(t)<0&&q.call(o,t)&&(n[t]=o[t]);return n};import{w as re,a as y,b as oe,m as se,x as ae,S as v,i as C,s as x,e as T,c as d,n as f,d as $,H as ce,h as U,u as ue,t as _,f as h,g,j as k,k as w,l as b,o as L,R as le,p as z,q as j,r as ie,v as fe,y as W,z as G,A as me,B as pe,C as E,D as N,E as de,F as $e,G as _e,I as he,J as ge,K as P}from"./vendor.6e5b95cc.js";const ke=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))t(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const c of s.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&t(c)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerpolicy&&(s.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?s.credentials="include":r.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function t(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}};ke();const Q="README.md",V=ye(),A=re(V?S({logged_in:!0},V):{logged_in:!1});async function we(o){y.set("at",o,{expires:14});const e=await Ee();return e?(y.set("u",JSON.stringify(e),{expires:14}),y.set("at",o,{expires:14}),A.set(S({logged_in:!0},e)),!0):(X(),!1)}function X(){y.remove("u"),y.remove("at"),A.set({logged_in:!1})}function be(){return y.get("at")}function ye(){const o=y.get("u");return o?JSON.parse(o):null}oe.register({request(o,e){const n=be();return n&&o.startsWith("https://api.github.com")&&(e===void 0&&(e={}),e.headers||(e.headers={}),e.headers=K(S({},e.headers),{Authorization:`token ${n}`})),[o,e]},response(o){return!o.ok&&o.statusText==="401"&&setTimeout(()=>X()),o}});async function ve(o,e){try{const n=await fetch(`https://raw.githubusercontent.com/${o}/_bookmarks/master/${e}`),t=await n.text();if(!n.ok)throw new Error(t);return t}catch(n){return console.error(n),null}}async function Ce(o,e){try{const n=await fetch(`https://api.github.com/repos/${o}/_bookmarks/contents/${e}`),t=await n.json();if(!n.ok)throw new Error(t);return t}catch(n){return console.error(n),null}}async function xe(o,e,n,t){try{const r=await fetch(`https://api.github.com/repos/${o}/_bookmarks/contents/${e}`,{method:"PUT",body:JSON.stringify({content:btoa(n),sha:t,message:"changed by Bookmarks"})}),s=await r.text();if(!r.ok)throw new Error(s);return s}catch(r){return console.error(r),null}}async function Ee(){try{const o=await fetch("https://api.github.com/user");if(!o.ok)throw new Error("Invalid response");return await o.json()}catch(o){return console.error(o),null}}const Ae=new se;function Y(o){return ae(Ae.render(o,void 0))}function Le(o){let e,n=Y(o[0])+"",t;return{c(){e=new ce,t=T(),e.a=t},m(r,s){e.m(n,r,s),d(r,t,s)},p(r,[s]){s&1&&n!==(n=Y(r[0])+"")&&e.p(n)},i:f,o:f,d(r){r&&$(t),r&&e.d()}}}function Pe(o,e,n){let{markdown:t}=e;return o.$$set=r=>{"markdown"in r&&n(0,t=r.markdown)},[t]}class Oe extends v{constructor(e){super();C(this,e,Pe,Le,x,{markdown:0})}}function Se(o){return{c:f,m:f,p:f,i:f,o:f,d:f}}function Ne(o){let e,n;return e=new Oe({props:{markdown:o[3]}}),{c(){g(e.$$.fragment)},m(t,r){k(e,t,r),n=!0},p(t,r){const s={};r&1&&(s.markdown=t[3]),e.$set(s)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){h(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Re(o){let e;return{c(){e=b("h2"),e.textContent="...loading user bookmarks"},m(n,t){d(n,e,t)},p:f,i:f,o:f,d(n){n&&$(e)}}}function Te(o){let e,n,t,r={ctx:o,current:null,token:null,hasCatch:!1,pending:Re,then:Ne,catch:Se,value:3,blocks:[,,,]};return U(n=o[0],r),{c(){e=T(),r.block.c()},m(s,c){d(s,e,c),r.block.m(s,r.anchor=c),r.mount=()=>e.parentNode,r.anchor=e,t=!0},p(s,[c]){o=s,r.ctx=o,c&1&&n!==(n=o[0])&&U(n,r)||ue(r,o,c)},i(s){t||(_(r.block),t=!0)},o(s){for(let c=0;c<3;c+=1){const i=r.blocks[c];h(i)}t=!1},d(s){s&&$(e),r.block.d(s),r.token=null,r=null}}}function Ue(o,e,n){let t,{username:r}=e,{path:s=Q}=e;return o.$$set=c=>{"username"in c&&n(1,r=c.username),"path"in c&&n(2,s=c.path)},o.$$.update=()=>{o.$$.dirty&6&&n(0,t=ve(r,s))},[t,r,s]}class je extends v{constructor(e){super();C(this,e,Ue,Te,x,{username:1,path:2})}}function Me(o){let e,n;return{c(){e=b("div"),L(e,"class",n=o[1].class)},m(t,r){d(t,e,r),o[2](e)},p(t,[r]){r&2&&n!==(n=t[1].class)&&L(e,"class",n)},i:f,o:f,d(t){t&&$(e),o[2](null)}}}function De(o,e,n){const t=le.createElement;let r;z(()=>{const u=e,{el:c,children:i,class:p}=u,l=R(u,["el","children","class"]);try{j.render(t(c,l,i),r)}catch(a){console.warn("react-adapter failed to mount.",{err:a})}}),ie(()=>{try{r&&j.unmountComponentAtNode(r)}catch(c){console.warn("react-adapter failed to unmount.",{err:c})}}),fe(()=>{const u=e,{el:c,children:i,class:p}=u,l=R(u,["el","children","class"]);try{j.render(t(c,l,i),r)}catch(a){console.warn("react-adapter failed to update",{err:a})}});function s(c){me[c?"unshift":"push"](()=>{r=c,n(0,r)})}return o.$$set=c=>{n(1,e=W(W({},e),G(c)))},e=G(e),[r,e,s]}class Fe extends v{constructor(e){super();C(this,e,De,Me,x,{})}}function He(o){let e,n,t;return n=new Fe({props:{el:pe,value:o[0],onChange:o[5],onSave:o[2]}}),{c(){e=b("section"),g(n.$$.fragment),L(e,"class","svelte-zjeybt")},m(r,s){d(r,e,s),k(n,e,null),t=!0},p(r,[s]){const c={};s&1&&(c.value=r[0]),s&2&&(c.onChange=r[5]),n.$set(c)},i(r){t||(_(n.$$.fragment,r),t=!0)},o(r){h(n.$$.fragment,r),t=!1},d(r){r&&$(e),w(n)}}}function Ie(o,e,n){let{path:t=Q}=e,r="",s="",c=null;A.subscribe(u=>{u.logged_in&&n(4,c=u.login)});let i,p=async({done:u})=>{const a=i();!a||a===r||await xe(c,t,a,s)};const l=u=>n(1,i=u);return o.$$set=u=>{"path"in u&&n(3,t=u.path)},o.$$.update=()=>{o.$$.dirty&24&&z(async function(){if(c===null)return;let u=await Ce(c,t);u!==null&&(n(0,r=atob(u.content)),s=u.sha)})},[r,i,p,t,c,l]}class Z extends v{constructor(e){super();C(this,e,Ie,He,x,{path:3})}}function Be(o){let e;return{c(){e=b("a"),e.textContent="Log in",L(e,"href","https://bookmarks-wiki.herokuapp.com/login")},m(n,t){d(n,e,t)},p:f,d(n){n&&$(e)}}}function qe(o){let e,n,t;return{c(){e=b("button"),e.textContent="Log out"},m(r,s){d(r,e,s),n||(t=de(e,"click",o[1]),n=!0)},p:f,d(r){r&&$(e),n=!1,t()}}}function Je(o){let e,n,t,r,s;function c(l,u){return l[0]?qe:Be}let i=c(o),p=i(o);return{c(){e=b("main"),n=b("h1"),n.textContent="Hello User!",t=E(),r=b("p"),r.textContent="This project is getting made at the moment.",s=E(),p.c(),L(e,"class","svelte-15ix2jw")},m(l,u){d(l,e,u),N(e,n),N(e,t),N(e,r),N(e,s),p.m(e,null)},p(l,[u]){i===(i=c(l))&&p?p.p(l,u):(p.d(1),p=i(l),p&&(p.c(),p.m(e,null)))},i:f,o:f,d(l){l&&$(e),p.d()}}}function Ke(o,e,n){let t=!1;return A.subscribe(s=>n(0,t=s.logged_in)),[t,()=>A.set({logged_in:!1})]}class ze extends v{constructor(e){super();C(this,e,Ke,Je,x,{})}}function We(o){let e,n,t;return{c(){e=b("h1"),e.textContent="Oh no...",n=E(),t=b("p"),t.textContent="We couldn't log you in, please try again later"},m(r,s){d(r,e,s),d(r,n,s),d(r,t,s)},d(r){r&&$(e),r&&$(n),r&&$(t)}}}function Ge(o){return{c:f,m:f,d:f}}function Qe(o){let e;return{c(){e=_e("...")},m(n,t){d(n,e,t)},d(n){n&&$(e)}}}function Ve(o){let e,n={ctx:o,current:null,token:null,hasCatch:!0,pending:Qe,then:Ge,catch:We};return U(o[0],n),{c(){e=T(),n.block.c()},m(t,r){d(t,e,r),n.block.m(t,n.anchor=r),n.mount=()=>e.parentNode,n.anchor=e},p(t,[r]){o=t},i:f,o:f,d(t){t&&$(e),n.block.d(t),n.token=null,n=null}}}function Xe(o){const e=$e();async function n(){const s=new URLSearchParams(window.location.search).get("accessToken");if(await we(s)){e("/");return}throw new Error}return[n()]}class Ye extends v{constructor(e){super();C(this,e,Xe,Ve,x,{})}}function Ze(o){let e,n;return e=new ze({}),{c(){g(e.$$.fragment)},m(t,r){k(e,t,r),n=!0},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){h(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function et(o){let e,n;return e=new Ye({}),{c(){g(e.$$.fragment)},m(t,r){k(e,t,r),n=!0},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){h(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function tt(o){let e,n;return e=new Z({}),{c(){g(e.$$.fragment)},m(t,r){k(e,t,r),n=!0},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){h(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function nt(o){let e,n;return e=new Z({props:{path:o[0].path}}),{c(){g(e.$$.fragment)},m(t,r){k(e,t,r),n=!0},p(t,r){const s={};r&1&&(s.path=t[0].path),e.$set(s)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){h(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function rt(o){let e,n;return e=new je({props:{username:o[0].username}}),{c(){g(e.$$.fragment)},m(t,r){k(e,t,r),n=!0},p(t,r){const s={};r&1&&(s.username=t[0].username),e.$set(s)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){h(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function ot(o){let e,n,t,r,s,c,i,p,l,u;return e=new P({props:{path:"/",$$slots:{default:[Ze]},$$scope:{ctx:o}}}),t=new P({props:{path:"/oauth/callback",primary:!1,$$slots:{default:[et]},$$scope:{ctx:o}}}),s=new P({props:{path:"/editor",primary:!1,$$slots:{default:[tt]},$$scope:{ctx:o}}}),i=new P({props:{path:"/editor/:path",primary:!1,$$slots:{default:[nt,({params:a})=>({0:a}),({params:a})=>a?1:0]},$$scope:{ctx:o}}}),l=new P({props:{path:"/:username",$$slots:{default:[rt,({params:a})=>({0:a}),({params:a})=>a?1:0]},$$scope:{ctx:o}}}),{c(){g(e.$$.fragment),n=E(),g(t.$$.fragment),r=E(),g(s.$$.fragment),c=E(),g(i.$$.fragment),p=E(),g(l.$$.fragment)},m(a,m){k(e,a,m),d(a,n,m),k(t,a,m),d(a,r,m),k(s,a,m),d(a,c,m),k(i,a,m),d(a,p,m),k(l,a,m),u=!0},p(a,m){const M={};m&2&&(M.$$scope={dirty:m,ctx:a}),e.$set(M);const D={};m&2&&(D.$$scope={dirty:m,ctx:a}),t.$set(D);const F={};m&2&&(F.$$scope={dirty:m,ctx:a}),s.$set(F);const H={};m&3&&(H.$$scope={dirty:m,ctx:a}),i.$set(H);const I={};m&3&&(I.$$scope={dirty:m,ctx:a}),l.$set(I)},i(a){u||(_(e.$$.fragment,a),_(t.$$.fragment,a),_(s.$$.fragment,a),_(i.$$.fragment,a),_(l.$$.fragment,a),u=!0)},o(a){h(e.$$.fragment,a),h(t.$$.fragment,a),h(s.$$.fragment,a),h(i.$$.fragment,a),h(l.$$.fragment,a),u=!1},d(a){w(e,a),a&&$(n),w(t,a),a&&$(r),w(s,a),a&&$(c),w(i,a),a&&$(p),w(l,a)}}}function st(o){let e,n,t;return n=new he({props:{$$slots:{default:[ot]},$$scope:{ctx:o}}}),{c(){e=b("main"),g(n.$$.fragment)},m(r,s){d(r,e,s),k(n,e,null),t=!0},p(r,[s]){const c={};s&2&&(c.$$scope={dirty:s,ctx:r}),n.$set(c)},i(r){t||(_(n.$$.fragment,r),t=!0)},o(r){h(n.$$.fragment,r),t=!1},d(r){r&&$(e),w(n)}}}function at(o){return ge("user",A),[]}class ct extends v{constructor(e){super();C(this,e,at,st,x,{})}}new ct({target:document.getElementById("app")});
